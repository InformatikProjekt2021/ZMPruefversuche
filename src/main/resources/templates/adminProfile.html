<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
    <link th:href="@{css/userProfilStyle.css}" href="../../static/css/userProfilStyle.css" rel="stylesheet" type="text/css" media="screen">
    <title>Admin Profile</title>
    <text id="firstName" class="form-control"
          required autofocus="autofocus" sec:authentication = "principal.username"></text>
    <script>
        const baseUrl = "http://localhost:8080/api/profile";
        function loadUsers(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", baseUrl, true);
            xmlhttp.onreadystatechange = function () {
                if(xmlhttp.readyState === 4 && xmlhttp.status === 200){
                    var user = JSON.parse(xmlhttp.responseText);
                    console.log(user)
                    // einbauen userdaten in html element
                    var div = "<div>" + user.firstName +"</div>";


                    document.getElementById("user").innerHTML = div;
                }
            };
            xmlhttp.send();
        }
        window.onload = function (){
            loadUsers();
        }
    </script>
</head>

<body class="bg-light">
<!-- Navbar -->

<nav class="navbar navbar-dark fixed-top bg-dark navbar-expand-sm p-0">
    <a class="navbar-brand col-5 col-sm-3 col-md-2 mr-0" href="#"><i class="fas fa-water"></i> Zugprüfmaschine</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMain">
        <i class="fas fa-caret-down"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarMain">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <a class="nav-link" href="">Anwendung starten</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="">Messdatenverwaltung</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="">Userverwaltung</a>
            </li>
        </ul>

        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="../boot/UserProfile.png" alt="UserProfile" class="img-profile">Max Mustermann
                </a>

                <div class="dropdown-menu " aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/" th:href="@{/login}">Abmelden</a>
                </div>

            </li>
        </ul>
    </div>
</nav>
<br>
<br>
<br>
<div id = "user"></div>
<!--<section class="container-fluid bg">
    <section class="row justify-content-center">
        <section class="col-md-5 col-sm-5 col-xs-12">

            <form class="form-container" >
                <h2 class="tit">Admin Profile</h2>
                <div id = "user"></div>
                <div class="Info">
                    <input id="tab-1" type="radio" name="tab" class="UserInfo" checked><label for="tab-1" class="tab">Admin Info</label>
                    <input id="tab-2" type="radio" name="tab" class="ChangePass"><label for="tab-2" class="tab">Passwort ändern</label>
                    <div class="UserProfile-form">
                        <div class="UserInfo-htm">
                            <div class="mb-3">
                                <label class="control-label" > First Name </label>

                                <input id="firstName" class="form-control" th:field="*{firstName}"
                                       required autofocus="autofocus" />

                                <span  class="form-control" th:value="{lastName}" >firstName</span>
                            </div>
                            <div class="mb-3">
                                <label class="control-label" > Last Name </label>

                                <input id="lastName" class="form-control" th:field="*{lastName}"
                                      required autofocus="autofocus" />

                                <span class="form-control" sec:authentication="principal.username">userName</span>
                            </div>
                            <div class="mb-3">
                                <label class="control-label" > Email </label>

                                <input id="email" class="form-control" th:field="*{email}" required
                                      autofocus="autofocus" />


                            </div>
                        </div>
                        <div class="ChangePass-htm">
                            <div class="mb-3">
                                <label class="control-label" for="password">Altes Password </label> <input
                                    id="password" class="form-control" type="password"
                                    th:field="*{password}" required autofocus="autofocus" />
                            </div>
                            <div class="mb-3">
                                <label class="control-label" for="password">Neues Password </label> <input
                                    id="password" class="form-control" type="password"
                                    th:field="*{password}" required autofocus="autofocus" />
                            </div>
                            <div class="mb-3">
                                <label class="control-label" for="password">Neues Password wiederholen </label> <input
                                    id="password" class="form-control" type="password"
                                    th:field="*{password}" required autofocus="autofocus" />
                            </div>
                            <button type="submit" class="btn btn-success btn-primary btn-block mb-3">Speichern</button>

                        </div>
                    </div>
                </div>
            </form>
        </section>
    </section>
</section>-->

</body>
</html>
